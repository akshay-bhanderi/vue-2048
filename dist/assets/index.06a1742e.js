var ee=Object.defineProperty,te=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var B=(s,e,r)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,I=(s,e)=>{for(var r in e||(e={}))re.call(e,r)&&B(s,r,e[r]);if(j)for(var r of j(e))ne.call(e,r)&&B(s,r,e[r]);return s},O=(s,e)=>te(s,se(e));import{r as oe,c as ae,w as K,a as E,o as d,b as m,d as i,t as C,u,F as b,e as w,f as y,g,T as P,n as ie,h as H,i as le,j as F,p as W,k as R,l as x,m as N,q as ce,s as T,v as ue}from"./vendor.d702ad1d.js";const de=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};de();const G=(s,e,r=!1)=>{const a=localStorage.getItem(s);if(r){let n=null;try{n=JSON.parse(a)}catch{n=null}return n||e}return a||e},z=(s,e,r=!1)=>{localStorage.setItem(s,r?JSON.stringify(e):e)},me={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3},Y=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}],L=()=>({tiles:[],score:0,uid:0,win:!1,isGameover:!1}),V=G("game-size",4),t=oe({size:V,bestScores:G("game-bestscores",{},!0),currentGame:G("game-state-"+V,L(),!0),boardWidth:0,showPopupGridSize:!1,showPopupWin:!1}),q=s=>{Object.assign(t.currentGame,s)},fe=s=>{t.size=s,z("game-size",s),q(G("game-state-"+s,L(),!0))},A=ae(()=>!t.currentGame.isGameover&&!t.showPopupGridSize&&!t.showPopupWin);K(()=>t.currentGame.score,s=>{s>(t.bestScores[t.size]||0)&&(t.bestScores[t.size]=s,z("game-bestscores",t.bestScores,!0))});const ve={class:"flex mb-4"},pe={class:"ml-auto mr-4 relative bg-zinc-700 px-3 py-1 text-white rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.25)] text-center"},he=i("div",{class:"text-xs font-bold uppercase"},"Score",-1),_e={class:"font-bold"},xe=["innerText"],ge={class:"bg-zinc-700 px-3 py-1 text-white rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.25)] text-center"},ye=i("div",{class:"text-xs font-bold uppercase"},"Best Score",-1),be={class:"font-bold"},we={setup(s){const e=E([]);let r=0;return K(()=>t.currentGame.score,(a,n)=>{const o=a-n;o>0&&(e.value.length>10&&e.value.shift(),e.value.push({id:++r,v:o}))}),(a,n)=>(d(),m("div",ve,[i("div",pe,[he,i("div",_e,C(u(t).currentGame.score),1),(d(!0),m(b,null,w(e.value,o=>(d(),y(P,{key:`s-${o.id}`,name:"score",appear:""},{default:g(()=>[i("span",{class:"absolute opacity-0 text-3xl right-4 bottom-0 z-20 text-emerald-500 font-bold whitespace-nowrap",innerText:`+  ${o.v}`},null,8,xe)]),_:2},1024))),128))]),i("div",ge,[ye,i("div",be,C(u(t).bestScores[u(t).size]||0),1)])]))}},J=s=>{for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)s(e,r)},Ge=()=>{const s=[];return J((e,r)=>{U({x:e,y:r})&&s.push({x:e,y:r})}),s},ze=()=>{var s=Ge();return s.length?s[Math.floor(Math.random()*s.length)]:!1},$=s=>t.currentGame.tiles.findIndex(e=>e.x===s.x&&e.y===s.y&&!e.t),U=s=>$(s)===-1,$e=s=>s.x>=0&&s.x<t.size&&s.y>=0&&s.y<t.size,ke=()=>{for(let r=0;r<t.currentGame.tiles.length;r++){const a=t.currentGame.tiles[r];for(var s=0;s<4;s++){var e=Y[s];const n=$({x:a.x+e.x,y:a.y+e.y});if(n!==-1&&t.currentGame.tiles[n].v===a.v)return!0}}return!1},X=s=>{for(var e=0;e<s;e++){const r=ze();r&&t.currentGame.tiles.push(O(I({},r),{v:Math.random()<.9?2:4,i:++t.currentGame.uid}))}},D=s=>{for(var e=t.currentGame.tiles.length-1;e>=0;--e)t.currentGame.tiles[e].t?t.currentGame.tiles.splice(e,1):t.currentGame.tiles[e].m=0;const r=Y[s];let a=!1;J((n,o)=>{r.x===1&&(n=t.size-1-n),r.y===1&&(o=t.size-1-o);const f=$({x:n,y:o}),p=t.currentGame.tiles[f];if(p){let l={x:p.x,y:p.y};do l.x=l.x+r.x,l.y=l.y+r.y;while($e(l)&&U(l));const v={x:l.x-r.x,y:l.y-r.y},c=$(l),_=t.currentGame.tiles[c];if(_&&!_.m&&!_.t&&_.v===p.v){const h=t.currentGame.tiles[c];Object.assign(t.currentGame.tiles[f],{x:h.x,y:h.y,t:1}),t.currentGame.tiles[c].t=!0;const S=h.v*2;S===2048&&!t.currentGame.win&&(t.currentGame.win=!0,t.showPopupWin=!0),t.currentGame.score+=S,t.currentGame.tiles.push({x:h.x,y:h.y,v:S,m:1,i:++t.currentGame.uid}),a=!0}else(p.x!==v.x||p.y!==v.y)&&(Object.assign(t.currentGame.tiles[f],v),a=!0)}}),a?(X(1),z(`game-state-${t.size}`,t.currentGame,!0)):(t.currentGame.isGameover=!(t.currentGame.tiles.length<t.size*t.size||ke()),z(`game-state-${t.size}`,t.currentGame,!0))},Q=()=>t.currentGame.tiles.length&&!t.currentGame.isGameover,k=()=>{q(L()),ie(()=>X(2))},Se={class:"flex"},Te=i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Me=[Te],Ce=i("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Ee=[Ce],Pe={setup(s){return(e,r)=>(d(),m("div",Se,[i("button",{onClick:r[0]||(r[0]=a=>u(t).showPopupGridSize=!u(t).showPopupGridSize),class:H([{"bg-emerald-500 hover:bg-emerald-600":u(t).showPopupGridSize},"ml-auto mr-3 px-3 py-2 select-none transition-colors rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.15)] bg-zinc-700 hover:bg-zinc-600 text-white"])},Me,2),i("button",{class:"px-3 py-2 select-none transition-colors rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.15)] bg-zinc-700 hover:bg-zinc-600 text-white focus:outline-none",onClick:r[1]||(r[1]=(...a)=>u(k)&&u(k)(...a))},Ee)]))}};var Z=(s,e)=>{const r=s.__vccOpts||s;for(const[a,n]of e)r[a]=n;return r};const Le={};function je(s,e){return d(),y(P,{"enter-from-class":"opacity-0","enter-active-class":"transition-opacity duration-200","leave-to-class":"opacity-0","leave-active-class":"transition-opacity duration-200"},{default:g(()=>[le(s.$slots,"default")]),_:3})}var M=Z(Le,[["render",je]]);const Be={class:"absolute inset-0 z-20 flex flex-col items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},Ie=i("div",{class:"text-white font-bold text-3xl mb-8"},"Select grid size:",-1),Oe={class:"w-full flex justify-evenly"},We=["onClick"],Ne={setup(s){const e=[3,4,5],r=a=>{fe(a),t.showPopupGridSize=!1,Q()||k()};return(a,n)=>(d(),m("div",Be,[Ie,i("div",Oe,[(d(),m(b,null,w(e,o=>i("button",{type:"button",key:o,onClick:f=>r(o),class:"bg-emerald-500 hover:bg-emerald-600 transition-colors px-3 py-2 text-white rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.15)] text-xl"},C(`${o}x${o}`),9,We)),64))])]))}},Ve={},Ae={class:"absolute inset-0 z-20 flex flex-col items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},De=i("div",{class:"text-white font-bold text-4xl mb-8"},"GAME OVER",-1),Ke=[De];function He(s,e){return d(),m("div",Ae,Ke)}var Fe=Z(Ve,[["render",He]]);const Re={class:"absolute inset-0 z-20 flex flex-col items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},Ye={class:"w-full flex justify-center"},qe={setup(s){const e=E(null);let r=null;return F(()=>{r=setInterval(()=>{W.confetti(e.value,{count:W.variation.range(20,50)})},750)}),R(()=>clearInterval(r)),(a,n)=>(d(),m("div",Re,[i("div",{class:"text-yellow-400 font-bold text-5xl mb-8",ref_key:"confetti",ref:e}," YOU WIN ",512),i("div",Ye,[i("button",{type:"button",onClick:n[0]||(n[0]=o=>u(t).showPopupWin=!1),class:"bg-emerald-500 hover:bg-emerald-600 transition-colors px-3 py-2 text-white rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.15)] text-xl"}," Continue ")])]))}},Je={class:"max-w-[512px] mx-auto px-8 flex flex-col min-h-screen"},Ue=i("div",{class:"flex py-8"},[i("div",{class:"bg-zinc-700 px-4 py-2 text-white font-bold text-4xl rounded-lg shadow-[inset_0_3px_0_rgba(255,255,255,.25)]"}," 2048 ")],-1),Xe=["innerText"],Qe=i("div",{class:"text-center mt-auto py-8 text-white font-medium"},[ce(" Build with "),i("a",{href:"https://vuejs.org/",class:"text-emerald-500"},"Vue.js")],-1),Ze={setup(s){const e=E(null),r=()=>{t.boardWidth=e.value.clientWidth},a=l=>{if(!A.value)return!1;const v=l.altKey||l.ctrlKey||l.metaKey||l.shiftKey,c=me[l.which];!v&&c!==void 0&&(l.preventDefault(),D(c))},n={x:null,y:null,started:!1},o=l=>{n.x=l.touches[0].clientX,n.y=l.touches[0].clientY,n.started=!0,l.preventDefault()},f=l=>{if(!!n.started){l.preventDefault();var v=l.changedTouches[0].clientX-n.x,c=Math.abs(v),_=l.changedTouches[0].clientY-n.y,h=Math.abs(_);if(!A.value)return n.started=!1,!1;Math.max(c,h)>5&&(D(c>h?v>0?1:3:_>0?2:0),n.started=!1)}},p=l=>{n.started=!1};return F(()=>{r(),window.addEventListener("resize",r),document.addEventListener("keydown",a),e.value.addEventListener("touchstart",o,{passive:!1}),e.value.addEventListener("touchmove",f,{passive:!1}),e.value.addEventListener("touchend",p,!1),Q()||k()}),R(()=>{window.removeEventListener("resize",r),document.removeEventListener("keydown",a),e.value.removeEventListener("touchstart",o,{passive:!1}),e.value.removeEventListener("touchmove",f,{passive:!1}),e.value.removeEventListener("keydown",a)}),(l,v)=>(d(),m("div",Je,[Ue,x(we),i("div",{class:"game-grid-wrap mb-4 relative overflow-hidden shadow-[inset_0_2px_0_rgba(255,255,255,.15)]",style:N({"--game-base-fontsize":`${u(t).boardWidth/(u(t).size*2)}px`,"--game-grid-size":u(t).size})},[i("div",{ref_key:"gameBoardElement",ref:e,class:"game-grid"},[(d(!0),m(b,null,w(u(t).size*u(t).size,c=>(d(),m("div",{class:"game-cell",key:c}))),128)),(d(!0),m(b,null,w(u(t).currentGame.tiles,c=>(d(),m("div",{key:c.i,class:H(["game-tile",[`game-tile-${c.v>65536?"super":c.v}`,{"game-tile-merged":c.m}]]),style:N({transform:`translate(${c.x*100}%,${c.y*100}%)`})},[x(P,{name:"tile",appear:""},{default:g(()=>[i("div",{innerText:c.v},null,8,Xe)]),_:2},1024)],6))),128))],512),x(M,null,{default:g(()=>[u(t).currentGame.isGameover?(d(),y(Fe,{key:0})):T("",!0)]),_:1}),x(M,null,{default:g(()=>[u(t).showPopupGridSize?(d(),y(Ne,{key:0})):T("",!0)]),_:1}),x(M,null,{default:g(()=>[u(t).showPopupWin?(d(),y(qe,{key:0})):T("",!0)]),_:1})],4),x(Pe),Qe]))}};ue(Ze).mount("#app");
